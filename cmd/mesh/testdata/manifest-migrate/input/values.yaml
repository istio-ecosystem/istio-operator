gateways:
  enabled: true

# sidecar-injector webhook configuration, refer to the
sidecarInjectorWebhook:
  enabled: true
  replicaCount: 1
  rollingMaxSurge: 100%
  rollingMaxUnavailable: 25%

  image: sidecar_injector

  enableNamespacesByDefault: false

  rewriteAppHTTPProbe: false

  selfSigned: false

  nodeSelector: {}
  tolerations: []

  injectLabel: istio-injection

  podAntiAffinityLabelSelector: []
  podAntiAffinityTermLabelSelector: []

  neverInjectSelector: []
  alwaysInjectSelector: []

# galley configuration, refer to charts/galley/values.yaml
galley:
  enabled: true
  image: galley
  replicaCount: 1
  rollingMaxSurge: 100%
  rollingMaxUnavailable: 25%

  resources:
    requests:
      cpu: 100m

  mesh: {}

  nodeSelector: {}
  tolerations: []

  podAntiAffinityLabelSelector: []
  podAntiAffinityTermLabelSelector: []

mixer:
  policy:
    enabled: true
    image: mixer
    replicaCount: 1
    rollingMaxSurge: 100%
    rollingMaxUnavailable: 25%
    autoscaleEnabled: true
    autoscaleMin: 1
    autoscaleMax: 5
    cpu:
      targetAverageUtilization: 80

    podAnnotations: {}

    env:
      GODEBUG: gctrace=1

    adapters:
      kubernetesenv:
        enabled: true

    nodeSelector: {}
    tolerations: []

    podAntiAffinityLabelSelector: []
    podAntiAffinityTermLabelSelector: []

  telemetry:
    enabled: true
    image: mixer
    replicaCount: 1
    rollingMaxSurge: 100%
    rollingMaxUnavailable: 25%
    autoscaleEnabled: true
    autoscaleMin: 1
    autoscaleMax: 5
    cpu:
      targetAverageUtilization: 80
    sessionAffinityEnabled: false

    loadshedding:
      mode: enforce
      latencyThreshold: 100ms
    resources:
      requests:
        cpu: 1000m
        memory: 1G
      limits:
        cpu: 4800m
        memory: 4G

    reportBatchMaxEntries: 100

    reportBatchMaxTime: 1s

    useMCP: true

    nodeSelector: {}
    tolerations: []

    podAntiAffinityLabelSelector: []
    podAntiAffinityTermLabelSelector: []

# pilot configuration
pilot:
  enabled: true
  autoscaleEnabled: true
  autoscaleMin: 1
  autoscaleMax: 5
  replicaCount: 1
  rollingMaxSurge: 100%
  rollingMaxUnavailable: 25%

  image: pilot
  traceSampling: 1.0

  resources:
    requests:
      cpu: 500m
      memory: 2048Mi

  configNamespace: istio-config

  appNamespaces: []

  env:
    GODEBUG: gctrace=1

  cpu:
    targetAverageUtilization: 80

  nodeSelector: {}
  tolerations: []
  podAntiAffinityLabelSelector: []
  podAntiAffinityTermLabelSelector: []

  keepaliveMaxServerConnectionAge: 30m

  deploymentLabels:

  meshNetworks:
    networks: {}

  configMap: true

  ingress:
    ingressService: istio-ingressgateway
    ingressControllerMode: "OFF"

    ingressClass: istio

  telemetry:
    enabled: true

  policy:
    enabled: false

  useMCP: true

# security configuration
security:
  enabled: true
  replicaCount: 1
  rollingMaxSurge: 100%
  rollingMaxUnavailable: 25%
  image: citadel
  selfSigned: true # indicate if self-signed CA is used.
  trustDomain: cluster.local # indicate the domain used in SPIFFE identity URL

  workloadCertTtl: 2160h

  enableNamespacesByDefault: true

  dnsCerts:
    istio-pilot-service-account.istio-control: istio-pilot-service-account.istio-control
    istio-pilot-service-account.istio-pilot11: istio-pilot-service-account.istio-system

    istio-sidecar-injector-service-account.istio-remote: istio-sidecar-injector.istio-remote.svc
    istio-sidecar-injector-service-account.istio-pilot11: istio-sidecar-injector.istio-pilot11.svc
    istio-sidecar-injector-service-account.istio-control: istio-sidecar-injector.istio-control.svc
    istio-sidecar-injector-service-account.istio-master: istio-sidecar-injector.istio-master.svc
    istio-sidecar-injector-service-account.istio-control-master: istio-sidecar-injector.istio-control-master.svc

    istio-galley-service-account.istio-pilot11: istio-galley.istio-pilot11.svc
    istio-galley-service-account.istio-control: istio-galley.istio-control.svc

    istio-galley-service-account.istio-master: istio-galley.istio-master.svc
    istio-galley-service-account.istio-control-master: istio-galley.istio-control-master.svc

    istio-galley-service-account.istio-config: istio-galley.istio-config.svc

  nodeSelector: {}
  tolerations: []

  podAntiAffinityLabelSelector: []
  podAntiAffinityTermLabelSelector: []

nodeagent:
  enabled: false
  image: node-agent-k8s
  env:
    CA_PROVIDER: ""
    CA_ADDR: ""
    Plugins: ""

  nodeSelector: {}
  tolerations: []

  podAntiAffinityLabelSelector: []
  podAntiAffinityTermLabelSelector: []

#
# addon grafana configuration
#
grafana:
  enabled: false

#
# addon prometheus configuration
#
prometheus:
  enabled: true

#
# addon jaeger tracing configuration
#
tracing:
  enabled: false

#
# addon kiali tracing configuration
#
kiali:
  enabled: false

#
# addon certmanager configuration
#
certmanager:
  enabled: false

#
# Istio CNI plugin.
#
istio_cni:
  enabled: false

# addon Istio CoreDNS configuration
#
istiocoredns:
  enabled: false

# Common settings used among istio subcharts.
global:
  hub: gcr.io/istio-release

  tag: master-latest-daily

  logging:
    level: "default:info"

  monitoringPort: 15014

  k8sIngress:
    enabled: false
    gatewayName: ingressgateway
    enableHttps: false

  proxy:
    init:
      resources:
        limits:
          cpu: 100m
          memory: 50Mi
        requests:
          cpu: 10m
          memory: 10Mi
    image: proxyv2

    clusterDomain: "cluster.local"

    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 2000m
        memory: 1024Mi

    concurrency: 2

    accessLogFile: ""

    accessLogFormat: ""

    accessLogEncoding: TEXT

    envoyAccessLogService:
      enabled: false
      host: # example: accesslog-service.istio-system
      port: # example: 15000
      tlsSettings:
        mode: DISABLE # DISABLE, SIMPLE, MUTUAL, ISTIO_MUTUAL
        clientCertificate: # example: /etc/istio/als/cert-chain.pem
        privateKey: # example: /etc/istio/als/key.pem
        caCertificates: # example: /etc/istio/als/root-cert.pem
        sni: # example: als.somedomain
        subjectAltNames: []
        # - als.somedomain
      tcpKeepalive:
        probes: 3
        time: 10s
        interval: 10s

    logLevel: ""

    componentLogLevel: ""

    dnsRefreshRate: 300s

    protocolDetectionTimeout: 10ms

    privileged: false

    enableCoreDump: false

    enableCoreDumpImage: ubuntu:xenial

    statusPort: 15020

    readinessInitialDelaySeconds: 1

    readinessPeriodSeconds: 2

    readinessFailureThreshold: 30

    includeIPRanges: "*"
    excludeIPRanges: ""
    excludeOutboundPorts: ""

    kubevirtInterfaces: ""

    includeInboundPorts: "*"
    excludeInboundPorts: ""

    autoInject: enabled
    envoyStatsd:
      enabled: false
      host: # example: statsd-svc.istio-system
      port: # example: 9125

    envoyMetricsService:
      enabled: false
      host: # example: metrics-service.istio-system
      port: # example: 15000

    tracer: "zipkin"

  proxy_init:
    image: proxy_init

  imagePullPolicy: IfNotPresent

  controlPlaneSecurityEnabled: false

  disablePolicyChecks: true

  policyCheckFailOpen: false

  enableTracing: true

  tracer:
    lightstep:
      address: ""                # example: lightstep-satellite:443
      accessToken: ""            # example: abcdefg1234567
      secure: true               # example: true|false
      cacertPath: ""             # example: /etc/lightstep/cacert.pem
    zipkin:
      address: ""
    datadog:
      address: "$(HOST_IP):8126"

  mtls:
    enabled: false

  imagePullSecrets: []

  arch:
    amd64: 2
    s390x: 2
    ppc64le: 2

  oneNamespace: false

  defaultNodeSelector: {}

  defaultTolerations: []

  configValidation: true

  meshExpansion:
    enabled: false
    useILB: false

  multiCluster:
    enabled: false

  defaultResources:
    requests:
      cpu: 10m

  defaultPodDisruptionBudget:
    enabled: true

  priorityClassName: ""

  useMCP: true

  trustDomain: ""

  meshID: ""

  sds:
    enabled: false
    udsPath: ""

  meshNetworks: {}

  localityLbSetting:
    enabled: true

  enableHelmTest: false
